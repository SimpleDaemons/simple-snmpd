# simple-snmpd-config.cmake.in
# Simple SNMP Daemon CMake configuration file
# Copyright 2024 SimpleDaemons
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

@PACKAGE_INIT@

# Include the targets file
include("${CMAKE_CURRENT_LIST_DIR}/simple-snmpd-targets.cmake")

# Check required components
check_required_components(simple-snmpd)

# Set variables for compatibility
set(SIMPLE_SNMPD_FOUND TRUE)
set(SIMPLE_SNMPD_VERSION @PROJECT_VERSION@)
set(SIMPLE_SNMPD_INCLUDE_DIRS "@PACKAGE_INCLUDE_DIR@")
set(SIMPLE_SNMPD_LIBRARIES simple-snmpd-core)
set(SIMPLE_SNMPD_LIBRARY_DIRS "@PACKAGE_LIB_DIR@")

# Platform-specific libraries
if(APPLE)
    find_library(SECURITY_FRAMEWORK Security)
    find_library(CORE_FOUNDATION_FRAMEWORK CoreFoundation)
    find_library(SYSTEM_CONFIGURATION_FRAMEWORK SystemConfiguration)
    set(SIMPLE_SNMPD_LIBRARIES ${SIMPLE_SNMPD_LIBRARIES}
        ${SECURITY_FRAMEWORK}
        ${CORE_FOUNDATION_FRAMEWORK}
        ${SYSTEM_CONFIGURATION_FRAMEWORK}
    )
elseif(UNIX AND NOT APPLE)
    find_library(RT_LIBRARY rt)
    set(SIMPLE_SNMPD_LIBRARIES ${SIMPLE_SNMPD_LIBRARIES} ${RT_LIBRARY})
elseif(WIN32)
    set(SIMPLE_SNMPD_LIBRARIES ${SIMPLE_SNMPD_LIBRARIES} ws2_32 iphlpapi)
endif()

# Provide legacy variables for backward compatibility
set(SIMPLE_SNMPD_INCLUDE_DIR ${SIMPLE_SNMPD_INCLUDE_DIRS})
set(SIMPLE_SNMPD_LIBRARY ${SIMPLE_SNMPD_LIBRARIES})
set(SIMPLE_SNMPD_LIBRARY_DIR ${SIMPLE_SNMPD_LIBRARY_DIRS})
